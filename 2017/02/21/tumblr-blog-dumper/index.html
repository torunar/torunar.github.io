<!Doctype html>
<html lang="ru-RU">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>BlogDumper: библиотека для простого экспорта блога из Tumblr</title>
<meta property="og:title" content="BlogDumper: библиотека для простого экспорта блога из Tumblr" />
<meta property="og:description" content="# /usr/bin/torunar :: " />
<meta property="twitter:card" content="summary" />
<meta property="twitter:title" content="BlogDumper: библиотека для простого экспорта блога из Tumblr" />
<meta property="twitter:description" content="# /usr/bin/torunar :: " />
    <link rel="stylesheet" href="https://torunar.github.io/css/main.css?v=3.3.1" />
    <link rel="alternate" type="application/rss+xml" title="# /usr/bin/torunar" href="https://torunar.github.io/rss.xml" />
    <link rel="canonical" href="https://torunar.github.io/2017/02/21/tumblr-blog-dumper/" />
</head>
<body>
<header class="header">
    <div class="container">
        <h1 class="header__title">
            <a class="header__home-link" href="https://torunar.github.io/"># /usr/bin/torunar</a>
            <small class="header__description"></small>
        </h1>
    </div>
</header>
    <div class="container">
        <div class="post">
            <div class="primary-wrapper">
                <div class="post__title-wrapper">
                    <h1 class="post__title">BlogDumper: библиотека для простого экспорта блога из Tumblr</h1>
                    <small class="post__date">2017/02/21</small>
                </div>
                <div class="post__preview">
                    
<p><img src="https://torunar.github.io/2017/02/21/tumblr-blog-dumper/img/cover.png" alt="" title=""></p>

<p>Первый пост о том, как я съезжал с Tumblr: речь пойдет об экспорте данных из блога.</p>
                </div>
                <div class="post__content">
                    
<p>Ближе к Новому году меня посетила мысль, что пора бы заняться блогом, начать в него писать про всякие антинаучные штуки, которые я пилю, про игрульки и разные пепяки, а то место простаивает.</p>

<p>Решил поступить радикально, отказаться от зависимостей, сосредоточиться на контенте — и в связи с этим съехать с Tumblr.</p>

<p>На новую платформу предстояло перенести посты за пять лет, в связи с чем встал вопрос о том, как все слить по-быстрому и привести в формат, пригодный для использования в блоге.</p>

<p>Для решения этой задачи я сел писать тулзу на PHP.
В сети есть <a href="https://github.com/search?l=PHP&amp;q=tumblr&amp;type=Repositories">немало</a> библиотек для работы с API Tumblr, в том числе, <a href="https://github.com/tumblr/tumblr.php">от самих Tumblr</a> — именно на базе нее я и запилил свое решение.</p>

<p>Работа была проделана за неделю–две, в результате на свет родилась библиотека <a href="https://github.com/torunar/blog.dumper">BlogDumper</a> и одноименная утилита.</p>

<p>Возможности:</p>

<ul>
<li>Сохранение текста постов (Posts), диалогов (Chats) и цитат (Quotes).</li>
<li>Сохранение изображений из галерей (Photos).</li>
</ul>

<p>Посты обрабатываются в рамках очереди, загрузка изображений ведется параллельно.
Т.к. либу я писал по большей части на коленке для внутренних нужд, то не стал заморачиваться на научно-магические библиотеки для распараллеливания задач и обошелся использованием <a href="http://php.net/manual/en/function.curl-multi-exec.php"><code>curl_multi_exec</code></a>.</p>

<p>Т.к. я планировал вести блог с использованием Markdown, то после реализации основной функциональности я сделал <a href="https://bitbucket.org/snippets/torunar/4ejdx">класс</a>, реализующий альтернативную обработку текстовых постов.
Для работы он использует <a href="https://github.com/thephpleague/html-to-markdown">HTML To Markdown for PHP</a> — в целом результат преобразования у меня не вызвал нареканий.</p>

<p>В <a href="https://torunar.github.io/2017/02/22/cider">следующем посте</a> я расскажу, как из сохраненных постов в Markdown я формировал блог. Будет много дичи.</p>
                </div>
            </div>
            
        </div>
    </div>
<footer class="footer">
    <div class="container">
        <div class="footer__links">
            <a class="rss" href="/rss.xml">RSS</a> <a class="github" href="https://github.com/torunar/">GitHub</a>
        </div>
    </div>
</footer>
</body>
</html>