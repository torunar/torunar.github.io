<?xml version="1.0"?>
<rss version="2.0">
    <channel>
        <title># /usr/bin/torunar</title>
        <link>https://torunar.github.io</link>
        <description></description>
        <language>ru-RU</language>
        <lastBuildDate>Sun, 30 Jun 2024 11:16:14 +0000</lastBuildDate>
        <generator>Cider v5.0.0</generator>
        <item>
            <title>Reverse engineering Bandcamp downloads for love and piece</title>
            <link>https://torunar.github.io/2024/06/24/bandcamp-downloads-en/</link>
            <guid>https://torunar.github.io/2024/06/24/bandcamp-downloads-en/</guid>
            <description><![CDATA[
<p><img src="https://torunar.github.io/2024/06/24/bandcamp-downloads-en/img/cover.png" alt="Combination of cUrl and Bandcamp logos" title=""></p>
<p><em>This post was originally published in English, but is also accessible in <a href="https://torunar.github.io/2024/06/24/bandcamp-downloads/">Russian</a>.</em></p>

<p><em><strong>Disclaimer</strong>: It turned out to be much longer and personal than I originally expected.</em>
<em>I decided to keep it this way, but if you came here only for programming stuff, you are more than welcome to <a href="#technical">skip to technical details</a>.</em></p>

<p>Man, I love Bandcamp.
For me it's the only platform that sparkles joy of discovering, listening and buying music.
Compared to Spotify, Apple Music or YouTube, Bandcamp doesn't seem to have The Algorithm™.
You can subscribe to genres  and it will simply show random new releases mixed with not-so-new releases in your feed: some of the albums will be pure gold, others will be utter garbage.
You can follow artists for new hot stuff, but it will not affect your recommendation feed anyhow.
Call me old fashioned, but I love the vibes it gives: even though new music is delivered straight to your browser, you still need to put in extra effort to find something that you really like and you can't predict where the journey takes you.</p>

<p>It brings back memories of being a teenager during the mid-2000s in my hometown.
If you were an emo, a goth or a metal head, there was one place for you to go — a local store selling all kinds of band merchandise (predominantly cheap knock-offs) and <a href="https://knowyourmeme.com/memes/three-wolf-moon">wolf t-shirts</a>.
I've spent countless hours there just window shopping, staring at clothing I couldn't afford and going through tapes and CDs they had in stock.
Luckily, the staff didn't care about gloomy teenagers hanging around, they knew that one day you'll save enough lunch money to buy something from them.</p>

<p>Buying music was a game of guess: I didn't have proper Internet access during that time, so the best source of recommendations I could count on were occasional Wikipedia articles and bands that my classmates mentioned.
So my strategy was simply looking at album covers and maybe asking a thing or two from a bored to death sales guy.
One day you could bring home a Lacrimosa CD just to find out that they are great, another day you get mixed feelings about a Children of Bodom cassette.
It was a gamble, and I enjoyed every single minute of it.</p>

<p>I don't get the same feeling from Spotify where recommendations look like "You liked sugar, so you'll probably like maltitol and aspartame" and I hate Apple way too much to even consider the idea of buying their music service subscription.
Subscriptions in general don't cut it for me: if I paid for music, I want it safely stored on my computer so I can copy it to my audio player (with hardware buttons) and listen it through wired headphones:</p>

<p><img src="https://torunar.github.io/2024/06/24/bandcamp-downloads-en/img/player.jpg" alt="Player" title=""></p>

<p>And it's not just music: I feel deeply betrayed by Sony who banned one of my PlayStation accounts and won't allow me to buy games from one of the remaining two;
the possibility of losing access to Steam games I (don't) own also looks quite grim.
This is the reason why I prefer GOG.com nowadays: I can download DRM-free installers to my computer and will be able to play Heroes of Might and Magic III even when society crumbles and the Internet goes dark.</p>

<p>Considering my love for Bandcamp, it should not come as a surprise that I also enjoy fiddling with it programmatically.
I call it fiddling for a simple reason: they don't provide official APIs for most of the things you can do on the site, but the site itself is built smart enough to allow me to craft these tools:</p>

<p><strong><a href="https://github.com/torunar/bc-player">BC Player</a></strong>:
an alternative Bandcamp music player that supports queuing (it also has a <a href="https://github.com/torunar/bc-player-helper">browser extension</a> to directly integrate with Bandcamp feed).</p>

<p><strong><a href="https://github.com/torunar/bandcamp-liked-albums-widget">Liked albums widget</a></strong>:
Bandcamp doesn't have "likes" per se, but you can wishlist stuff — and hey, they use a heart icon for it, close enough.
List of wishlisted albums is accessible through (non-documented, of course) search API, which allowed me to build a site where everyone can showcase a collection of releases they like.
Here is mine, for example:</p>

<iframe src="https://torunar.github.io/bandcamp-liked-albums-widget/?fan_id=3382834" style="min-height: 270px; margin-bottom: var(--uiGap);"></iframe>

<p><strong><a href="https://github.com/torunar/rss-feeds">Liked albums RSS</a></strong>:
it's basically the same thing in the form of an RSS feed.
I mostly follow blackgaze, math rock, synthwave and breakcore, so if you want to stay tuned with what catches my attention on Bandcamp, just add this URL in your RSS reader of choice: <a href="https://torunar.github.io/rss-feeds/build/bandcamp-liked-albums.xml">https://torunar.github.io/rss-feeds/build/bandcamp-liked-albums.xml</a>.</p>

<p>I mentioned buying stuff from Bandcamp, but a lot of music there is available for free, you just go and download it.
Legally.
No strings attached.
They even let you choose the format and quality, isn't it nice?</p>

<p><img src="https://torunar.github.io/2024/06/24/bandcamp-downloads-en/img/format-selector.png" alt="Bandcamp download format selector" title=""></p>

<p>And even if something is not available freely, there's of course a way to download it with, say, <a href="https://github.com/ytdl-org/youtube-dl">youtube-dl</a>.
Bandcamp understand it and openly admit that they're not going to spend development time and money to fix something that is not broken: <a href="https://bandcamp.com/help/audio_basics#steal">"I heard you can steal music on Bandcamp. What are you doing about this?"</a>.
If you want to support a performer, just name your price (some albums have minimal price set, you can add extra on top) — the artist will get most of the money you paid, and you'll get a copy of the album to listen on your audio player (with hardware buttons!).</p>

<p><span id="technical"></span>
Which brings me to the topic of this post: how does downloading free (i.e., distributed without a lower price limit set) music work on Bandcamp?
What if I want to have a local backup of all the free releases from my wishlist?
Bandcamp don't seriously expect me to go through the manual download process for every single album, do they?
Even if they do, I'm pretty sure there is a way to work it around.
Let's go to a <a href="https://sugarwounds.bandcamp.com/album/mechanical-friends-remastered">free album page</a>, ask for a download and see where Bandcamp redirect me:</p>

<pre><code>https://bandcamp.com/download?id=472457604&amp;ts=1719170366.294537336&amp;tsig=5e1411c3cc4ffe2b0c02b31ffb0e60de&amp;type=album
</code></pre>

<p>Okay, the URL has something that looks like an album ID, some token and signature.
Downloading different albums gives different IDs, token and signature change every time, so I can't hardcode them.
From my previous encounters with Bandcamp, I know that it stores album information in a <code>script</code> element with the <code>data-tralbum</code> attribute, which contains JSON-encoded album data, so let's see if there is a free download link there somewhere:</p>

<pre><code>{
  "for the curious": "https://bandcamp.com/help/audio_basics#steal https://bandcamp.com/terms_of_use",
  "current": "/** skipped **/",
  "preorder_count": null,
  "hasAudio": true,
  "art_id": 3553041759,
  "packages": null,
  "defaultPrice": 7.0,
  "freeDownloadPage": "https://bandcamp.com/download?id=472457604&amp;ts=1719170366.294537336&amp;tsig=5e1411c3cc4ffe2b0c02b31ffb0e60de&amp;type=album",
  "FREE": 1,
  "PAID": 2,
  "artist": "Sugar Wounds",
  "item_type": "album",
  "id": 472457604,
  "last_subscription_item": null,
  "has_discounts": false,
  "is_bonus": null,
  "play_cap_data": null,
  "client_id_sig": null,
  "is_purchased": false,
  "items_purchased": {
    "packages": {},
    "bundles": {},
    "crowdfunding_campaign": {}
  },
  "is_private_stream": null,
  "is_band_member": null,
  "licensed_version_ids": null,
  "package_associated_license_id": null,
  "has_video": null,
  "tralbum_subscriber_only": false,
  "featured_track_id": 4234552772,
  "initial_track_num": null,
  "is_preorder": false,
  "album_is_preorder": false,
  "album_release_date": "24 May 2024 08:11:31 GMT",
  "trackinfo": "/** skipped **/",
  "playing_from": "album page",
  "url": "https://sugarwounds.bandcamp.com/album/mechanical-friends-remastered",
  "use_expando_lyrics": false
}
</code></pre>

<p>And surely there is the <code>freeDownloadPage</code> property.
Now I know how to get to an album download page, but how do I get the actual ZIP archive URL from it?
Let's open source code and start digging.
Again, there is a <code>script</code> element on the page, called <code>pagedata</code> with something JSON-encoded in its <code>data-blob</code> attribute.
The content of this attribute is quite long, so let's focus only on this part:</p>

<pre><code>{
  "digital_items": [
    {
      "downloads": {
        "mp3-320": {
          "size_mb": "63.3MB",
          "description": "MP3 320",
          "encoding_name": "mp3-320",
          "url": "https://popplers5.bandcamp.com/download/album?enc=mp3-320&amp;fsig=00b08a0ef60ff8f0a9b9e4970c0ba43b&amp;id=472457604&amp;ts=1719170609.0"
        }
      }
    }
  ]
}
</code></pre>

<p>It looks like a list of formats and URLs.
Let's take one of them and try shoving it in the address bar:</p>

<p><img src="https://torunar.github.io/2024/06/24/bandcamp-downloads-en/img/download-expired.png" alt="Download expired" title=""></p>

<p>Bummer.
Is it time to use the network monitor to debug stuff?
Apparently, the URLs I found before are <strong>not</strong> download URLs, but stat URLs.
When I change format on the free download page to MP3-320, I can see the request to a slightly different URL:</p>

<pre><code>https://popplers5.bandcamp.com/statdownload/album?enc=mp3-320&amp;fsig=d0b8d24621d44e47db70e80af71eb6b7&amp;id=472457604&amp;ts=1719170610.3045844466&amp;.rand=1118817395515&amp;.vrs=1
</code></pre>

<ul>
<li><code>download</code> is replaced with <code>statdownload</code>.</li>
<li><code>ts</code> no longer ends with <code>.0</code>, but with some seemingly random value.</li>
<li>Additional <code>&amp;.rand</code> parameter added with, again, some random value.</li>
<li><code>&amp;.vrs=1</code> appended at the end of the URL.</li>
</ul>

<p>Response to the request looks like this:</p>

<pre><code>{
  "result": "ok",
  "url": "popplers5.bandcamp.com/statdownload/album?enc=mp3-320&amp;fsig=d0b8d24621d44e47db70e80af71eb6b7&amp;id=472457604&amp;ts=1719170610.3045844466&amp;.rand=1118817395515&amp;.vrs=1",
  "host": "scruffycentral-b4gx-2",
  "download_url": "https://p4.bcbits.com/download/album/1be668409c340ce30382a4b172b1ba553/mp3-320/472457604?fsig=67b47364b6ff165b09c0df8d994c7384&amp;id=472457604&amp;ts=1719171791.1334808993&amp;token=1719776591_abb599a8c126fc1a86667adcab20b1649975e991"
}
</code></pre>

<p>Will it work if I use the <code>download_url</code> from the response?
It surely does, I get my sweet ZIP archive and there is free music inside:</p>

<p><img src="https://torunar.github.io/2024/06/24/bandcamp-downloads-en/img/free-music.png" alt="lol-limeware" title=""></p>

<p>The problem is I have no idea how the trailing part of <code>ts</code> and the <code>.rand</code> parameter are calculated.
What response will I get if I put random values there?
Interestingly enough, it's no longer JSON, but some Javascript code:</p>

<pre><code>if (window.Downloads) {
    Downloads.statResult({
        "result": "err",
        "retry_url": "https://popplers5.bandcamp.com/download/album?enc=mp3-320&amp;fsig=68a6ccd613ace8850db6e42258de8625&amp;id=472457604&amp;ts=1719217640.3278671238",
        "errortype": "ExpiredFreeDownloadError",
        "date": "2024-06-24 08:27:20 UTC",
        "url": "popplers5.bandcamp.com/statdownload/album?enc=mp3-320&amp;fsig=23be1fba7f0f83c6f725ed9cbcae4275&amp;id=472457604&amp;ts=1719217626.0&amp;.rand=1719217626000&amp;.vrs=1",
        "host": "scruffycentral-b4gx-1"
    })
};
</code></pre>

<p><code>retry_url</code> looks promising, though — and of course when I use it download starts.</p>

<p>Bandcamp, you're truly amazing.
What's next?
Should I build a tool that makes local backup of free albums from my wishlist?
Maybe I will, the whole download process seems to be easy enough to handle in a single bash script (if you speak <code>sed</code>):</p>

<pre><code>#!/usr/bin/env bash

ITEM_URL="${1}"

FREE_DL_PAGE_URL=$(curl -sq "${ITEM_URL}" \
    | sed -nE -e 's/^.+(https:\/\/bandcamp.com\/download\?id=[0-9]+&amp;amp;ts=[0-9]+.[0-9]+&amp;amp;tsig=[a-z0-9]+&amp;amp;type=album).+/\1/p' \
    | sed 's/&amp;amp;/\&amp;/g' \
)

DL_STAT_URL="$(curl -sq "${FREE_DL_PAGE_URL}" \
    | sed -nE -e 's/^.+(https:\/\/popplers5.bandcamp.com\/download\/album\?enc=mp3-320&amp;amp;fsig=[a-z0-9]+&amp;amp;id=[0-9]+&amp;amp;ts=[0-9]+.0).+/\1/p' \
    | sed 's/&amp;amp;/\&amp;/g' \
    | sed 's/\/download\//\/statdownload\//' \
)&amp;.rand=$(date +%s)000&amp;.vrs=1"

DL_URL=$(curl -sq "${DL_STAT_URL}" \
    | sed -nE -e 's/.+(https:\/\/popplers5.bandcamp.com\/download\/album\?enc=mp3-320&amp;fsig=[a-z0-9]+&amp;id=[0-9]+&amp;ts=[0-9]+.[0-9]+).+/\1/p'\
)
curl -o music.zip "${DL_URL}"
</code></pre>

<p>And I guess it's time for me to stop and say thank you for reading all the way to the end.
I'll be back with other technical shenanigans any time soon, stay tuned!</p>]]></description>
            <pubDate>Mon, 24 Jun 2024 00:00:00 +0000</pubDate>
        </item>
        <item>
            <title>Чего там по винилу? Отчет за июнь 2024</title>
            <link>https://torunar.github.io/2024/06/30/vinyl-report/</link>
            <guid>https://torunar.github.io/2024/06/30/vinyl-report/</guid>
            <description><![CDATA[
<p><img src="https://torunar.github.io/2024/06/30/vinyl-report/img/cover.png" alt="cover" title=""></p>
<h2>Carpenter Brut — Trilogy</h2>

<p><span class="gallery-2">
<a href="https://torunar.github.io/2024/06/30/vinyl-report/img/carpenter-brut-trilogy-front.jpg"><img src="https://torunar.github.io/2024/06/30/vinyl-report/img/carpenter-brut-trilogy-front.jpg" alt="Trilogy: Front cover" title=""></a>
<a href="https://torunar.github.io/2024/06/30/vinyl-report/img/carpenter-brut-trilogy-back.jpg"><img src="https://torunar.github.io/2024/06/30/vinyl-report/img/carpenter-brut-trilogy-back.jpg" alt="Trilogy: Back cover" title=""></a>
<span></p>

<p>Танцевальный, стильный, пугающий — три эпитета про тройной альбом.
Trilogy — это компиляция из предыдущих EP Карпатыча, крайне логично названных EP I, EP II и EP III.
Внутреннее оформление конверта, соответственно, — это компиляция-переосмысление обложек предыдущих релизов:</p>

<p><a href="https://torunar.github.io/2024/06/30/vinyl-report/img/carpenter-brut-trilogy-inside.jpg"><img src="https://torunar.github.io/2024/06/30/vinyl-report/img/carpenter-brut-trilogy-inside.jpg" alt="Trilogy: Inside" title=""></a></p>

<p>В целом альбом можно охарактеризовать одной фразой: «ни прибавить, ни убавить»: это идеальный экземпляр в коллекции любителей дарксинта от одного из главных представителей этого жанра.
Треки с «Трилогии» регулярно ремейкают другие исполнители, сам Carpenter Brut постоянно исполняет их на живых выступлениях, где они звучат намного жестче и реально сотрясают стены. 
А еще это прекрасная музыка для кодинга! 
Сцена из финала игры Hacknet это только подтверждает:</p>

<iframe src="https://www.youtube-nocookie.com/embed/-c_jGVx6vxE"></iframe>

<h2>Katatonia — The Fall of Hearts</h2>

<p><span class="gallery-2">
<a href="https://torunar.github.io/2024/06/30/vinyl-report/img/katatonia-the-fall-of-hearts-front.jpg"><img src="https://torunar.github.io/2024/06/30/vinyl-report/img/katatonia-the-fall-of-hearts-front.jpg" alt="The Fall of Hearts: Front" title=""></a>
<a href="https://torunar.github.io/2024/06/30/vinyl-report/img/katatonia-the-fall-of-hearts-back.jpg"><img src="https://torunar.github.io/2024/06/30/vinyl-report/img/katatonia-the-fall-of-hearts-back.jpg" alt="The Fall of Hearts: Back" title=""></a>
</span></p>

<p>Когда в 2009-м Katatonia выпустили Night is the New Day, я был настолько им разочарован, что перестал следить за новыми релизами группы на долгие годы и в итоге пропустил <a href="https://torunar.github.io/2024/03/26/vinyl-report/">Dead End Kings</a> на релизе.
Мою веру в новый стиль смог закрепить только следующий их альбом The Fall of Hearts, и если бы я мог послать сообщение самому себе обратно в 2012-й, это была бы одна фраза: <a href="https://on.soundcloud.com/G1Vxoo8pyC3f5h127">«Блять, какой ты дурак, ёб твою мать…»</a>. </p>

<p>The Fall of Hearts не то, чтобы эпохальный, но крайне качественный.
Всегда ношу его с собой на плеере (с кнопочками!), но для меланхоличного прослушивания дома под дождик на улице он подходит все-таки лучше.</p>

<h2>Massive Attack — Mezzanine</h2>

<p><img src="https://torunar.github.io/2024/06/30/vinyl-report/img/massive-attack-mezzanine.jpg" alt="Mezzanine" title=""></p>

<p>Я человек бескультурный. 
Трип-хоп не люблю, за Portishead не шарю, в Бристоле не был.
Но даже при этом Massive Attack знаю и уважаю лет этак с 15.
Первым их треком для меня стала Angel, игравшая в главном меню пройденной мною раз десять Vampire: the Masquerade — Bloodlines, а вторым была Teardrop из опенинга «Доктора Хауса».
Вот такую великую силу имеет группа, раз уж даже в моем болоте их музыка до меня добралась.</p>

<p>Жена у меня тоже Massive Attack котирует и взять Mezzanine было ее идеей, за что ей +100500 очков респекта.
Так уж совпало, что на этом альбоме есть и Angel, и Teardrop — гештальт закрыт, а в физическом издании можно еще и на красивого жирного жука на конверте смотреть.</p>

<p>И на этом все на сегодня!
Пишите <a href="https://t.me/misha_talks/165">в комментах</a>, кстати, что вы думаете про слухи, что основатель Massive Attack Роберт Дель Ная — это и есть Banksy.</p>]]></description>
            <pubDate>Sun, 30 Jun 2024 00:00:00 +0000</pubDate>
        </item>
        <item>
            <title>Чего там по винилу? Отчет за декабрь 2023</title>
            <link>https://torunar.github.io/2023/12/28/vinyl-report/</link>
            <guid>https://torunar.github.io/2023/12/28/vinyl-report/</guid>
            <description><![CDATA[
<p><img src="https://torunar.github.io/2023/12/28/vinyl-report/img/cover.png" alt="" title=""></p>
<p>Когда я сел писать этот пост, я понял, что все это время я придерживаюсь одной и той же схемы: один саундтрек, одна пластинка Katatonia и одна старая запись. Я не задумывал такую структуру изначально, просто меня очень легко зацепить музыкой из фильмов и игр, старье резонирует с моим внутренним дедом, а Katatonia — так и вовсе моя любимая группа на протяжении последних 17 лет, поэтому нет ничего удивительного, что я теперь закупаю всю их дискографию.</p>

<h2>Angelo Badalamenti — Music From Twin Peaks</h2>

<p><img src="https://torunar.github.io/2023/12/28/vinyl-report/img/twin-peaks.jpg" alt="" title=""></p>

<p>Как говорил Карлик в Твин Пикс: «Там откуда мы пришли, птицы поют чудесные песни, и воздух наполнен музыкой».
В данном случае музыка состоит из мощного баса заглавной темы, тревожных синтезаторов темы Лоры Палмер, сексуальных ударных танца Одри и вкрадчивого пения Джули Круз.</p>

<p>Как и все, связанное с Твин Пиксом, музыка эта предназначена для особого настроения: когда время течет вязко, солнце светит тускло, а едва ощутимое чувство нереальности происходящего заставляет сердце биться чуть чаще, то есть она идеально подходит для вечных зимних сумерек.</p>

<p>Именно этот альбом заставляет меня жалеть об ограничениях винила как носителя, потому что каждые 20 минут музыка прерывается и пластинку нужно переворачивать.</p>

<h2>Katatonia — The Great Cold Distance</h2>

<p><img src="https://torunar.github.io/2023/12/28/vinyl-report/img/katatonia.jpg" alt="" title=""></p>

<p>Вот я и добрался до альбома, с которого больше 15 лет назад началось мое journey through pressure, икона, эталон и мерило, с которым я сравнивал и сравниваю каждый метал-альбом: некоторые из них лучше, некоторые хуже, но ни один не такой же.</p>

<p>Именно The Great Cold Distance открыл для меня метал в целом и во многом сформировал мой современный музыкальный вкус. <br>
Именно The Great Cold Distance протащил меня через эмоционально нестабильный подростковый период, полные дивных открытий студенческие годы и оставил в зрелости с тревожным мироощущением завтрашнего дня. <br>
Именно The Great Cold Distance подарил мне тот самый интерес к Швеции, который в итоге привел меня в эту страну.</p>

<p>Если вы неосторожно упомянете Katatonia в разговоре со мной, то я буду до хрипоты рассказывать вам о влиятельности и безупречности The Great Cold Distance. И вы не сможете меня остановить.</p>

<p><img src="https://torunar.github.io/2023/12/28/vinyl-report/img/katatonia-meme.jpg" alt="" title=""></p>

<h2>Mike Oldfield / David Bedford — The Orchestral Tubular Bells</h2>

<p><img src="https://torunar.github.io/2023/12/28/vinyl-report/img/tubular-bells.jpg" alt="" title=""></p>

<p>Когда я нашел эту пластинку в букинистическом магазине, я настолько обрадовался и поспешил ее купить, что совершенно не обратил внимания на слово orchestral в названии. 
Tubular Bells Олдфилда я люблю с той поры, как услышал ее первый раз в фильме «Экзорцист» 1973-го года, и иметь ее в коллекции было бы почетно.
Плюс, исходный альбом прямо-таки создан для пластинок: цельное произведение аккуратно разделено на две связанные композиции по 20 минут.</p>

<p>Ошибку я осознал уже дома, но реальность оказалась не так уж и далека от ожиданий, прогрессивный рок зачастую выигрывает от оркестрового исполнения, а тут еще и сам Майк Олдфилд исполняет гитарные партии.</p>

<p>На полочку ставлю, слушать буду, но и искать оригинальные Tubular Bells на барахолках не перестаю.</p>]]></description>
            <pubDate>Thu, 28 Dec 2023 00:00:00 +0000</pubDate>
        </item>
        <item>
            <title>Мы сделали это, профессор! Итоги 2023 года</title>
            <link>https://torunar.github.io/2023/12/31/2023-rewind/</link>
            <guid>https://torunar.github.io/2023/12/31/2023-rewind/</guid>
            <description><![CDATA[
<p><img src="https://torunar.github.io/2023/12/31/2023-rewind/img/2023.jpg" alt="" title=""></p>
<p>Попытки впихнуть опыт целых двенадцати месяцев в один текст заранее обречены на провал, но я постараюсь. Год выдался богатым на события: к работе прибавилась учеба, социальных связей стало сильно больше, переезды и путешествия были и нервными, и радостными одновременно. Я, если честно, уже и сам путаюсь в хронологии событий, поэтому попробую разбить чувственный опыт на какие-то категории без привязки ко времени и попытаюсь выделить что-то запоминающееся.</p>

<h2>Фильмы</h2>

<p>Из 50+ фильмов и мультфильмов, что я видел в этом году, лишь немногие вышли в этом году и запомнились: это «Братья Супер Марио в кино», «Подземелья и драконы: Честь среди воров» и последний (во всех смыслах) «Флэш».</p>

<p><img src="https://torunar.github.io/2023/12/31/2023-rewind/img/how-to-train-your-dragon-2.jpg" alt="" title=""></p>

<p>Все они, ну допустим, окэй, но фильмами года ни один назвать не получится. А вот «Как приручить дракона — 2», да и всю драконью трилогию в целом — очень даже. Красивый, интересный даже сейчас и очень трогательный мультфильм о семье и ответственности.</p>

<h2>Книги</h2>

<p>В этом году я больше, чем раньше, читал на шведском: это и адаптированные версии «Каллокаина» и сказок про муми-троллей, и короткие оригинальные истории. Книг на английском тоже хватало, но книжным (пере)открытием стал Станислав Лем, которого я начал читать в хронологическом порядке под конец года.</p>

<p>Просто удивительно, как книги, написанные в 50-х и 60-х годах, точно описывают концепции технологий, появившихся два, а то и три десятилетия спустя: микроэлектронику, интернет, бытовое применение ИИ.</p>

<p><img src="https://torunar.github.io/2023/12/31/2023-rewind/img/lem-astronauci.jpg" alt="" title=""></p>

<p>Особенно хотел бы выделить по сути первый (по факту — второй) его роман «Астронавты», в котором просматривается столь типичная для более позднего Лема тема космоса опасного и непонятного, но потому притягательного и захватывающего. Жанрово «Астронавты» мечутся между триллером и агитационным плакатом с коммунистической пропагандой, но поскольку книга затрагивает универсальные темы гуманизма, то читается на одном дыхании даже сейчас.</p>

<h2>Музыка</h2>

<p>Многие из моих фаворитов выпустили в этом году новые альбомы: это и очень антивоенные «Камни» Tequilajazzz, и Sky Void of Stars от Katatonia, но музыкой года ни один из них не стал.</p>

<p><img src="https://torunar.github.io/2023/12/31/2023-rewind/img/ragana-desolation-flower.jpg" alt="" title=""></p>

<p>А вот совершенно безысходный, буквально воющий от отчаяния <a href="https://ragana.bandcamp.com/album/desolations-flower">Desolation's Flower</a> американского дуэта Ragana вполне прочно занял место самого прослушиваемого альбома уже под занавес года. Начинай свое утро с чашечкой бодрящего блэк-метала!</p>

<h2>Концерты</h2>

<p>Продолжаем музыкальную тему. В этом году было много концертов, хороших и разных:</p>

<ul>
<li>Мы ездили на Depeche Mode и, возможно, видели эту группу вживую в последний раз. Никто не молодеет, а люди внезапно смертны.</li>
<li>Я был на Meshuggah, и реальность оказалась лучше мемов: эти ребята превращают мозг в фарш только так.</li>
<li>Очень много маленьких концертов в клубе Plan B дали возможность послушать в первый раз Enter Shikari, Skynd, Lake Malice и Knife Bride.</li>
</ul>

<p><img src="https://torunar.github.io/2023/12/31/2023-rewind/img/katatonia.jpg" alt="" title=""></p>

<p>Но все это ерунда и мелочи по сравнению с главным событием года — концертом Katatonia в Копенгагене. Услышать на концерте группу, которая определила мой музыкальный вкус на последние полтора десятилетия как минимум, ощущать музыку всем телом, петь любимые песни в толпе стоит многого. Я рад, что это наконец случилось и особенно ценю этот опыт; даже если впереди будут еще отличные концерты Katatonia, так, как было в первый раз, уже точно не будет.</p>

<h2>Игры</h2>

<p>Как и в случае с фильмами, ничего нового из игр в этом году до меня не дошло. Я преимущественно разгребал бэклог из игр с раздач в Стиме и ЕГС, плюс проходил некоторые игры с PS4, взятые в библиотеке на дисках. Было много проходняка: это и Horizon Forbidden West, и Fist of the North Star: Lost Paradise, и Deliver Us Mars, но и хорошего хватало. Трудно выделить одну «самую-самую» игру, поэтому пускай их будет две. </p>

<p><img src="https://torunar.github.io/2023/12/31/2023-rewind/img/alan-wake.jpg" alt="" title=""></p>

<p>Первый Alan Wake, который как с самого начала взял меня за шкирдяк, так и не отпускал следующие 15 часов своей атмосферой фильмов Линча и заманухой в конце каждого эпизода. Очень хочу верить, что физическое издание второй части все же случится, и я когда-нибудь ее пройду.</p>

<p><img src="https://torunar.github.io/2023/12/31/2023-rewind/img/nier-replicant.jpg" alt="" title=""></p>

<p>Nier: Replicant уже по традиции игр от Йоко Таро вынул из меня все кишки и эмоционально уничтожил. Очень хорошо, давайте еще! Серия Nier умудряется делать безысходность, распад и отчаяние увлекательными и захватывающими, истории отдельных людей (и машин) в них всегда запоминаются, а в целом от игр остается ощущение шекспировской драмы, когда в каждой главе ты погружаешься все глубже и глубже в пучину, но концовка всегда ощущается как некий катарсис, даже при том, что ее нельзя назвать счастливой.</p>

<h2>Путешествия</h2>

<p>В прошлом году мы дорвались до внутреннего туризма и посетили кучу соседних городов и заповедников. В этом году запал будто бы утих, но все же запоминающихся событий хватило:</p>

<ul>
<li>Поездка к тюленям в Моклэппен удостоилась <a href="https://torunar.github.io/2023/01/28/see-the-seal/">отдельного поста в блоге</a>.</li>
<li>Автомобильный музей Симрисхамна в самую пору выделять в отдельную категорию «Винегрет года», потому что такой огромной и неупорядоченной коллекции автомобилей я еще не встречал.</li>
<li>Поездка в зоопарк Сконе, кажется, становится ежегодной традицией. Все еще считаю его отличным сочетанием нацпарка и зоопарка, отличным местом и для взрослых, и для детей.</li>
<li>В этом году мы начали осваивать Сконеледен — муниципальную сеть маршрутов для хайкинга в нашем регионе. Прокладывать пути самостоятельно все еще очень сложно, потому что приходится ограничивать себя прогулками на 3-5 часов с привязкой к автобусным станциям в начале и конце, но пару раз за лето все же удалось выбраться.</li>
</ul>

<p><img src="https://torunar.github.io/2023/12/31/2023-rewind/img/spain.jpg" alt="" title=""></p>

<p>Главным же событием наверное была поездка в Испанию к моим котанам. Терапевтический тур по небольшим городам Каталонии в отличной компании, вкусная еда, хорошая погода  — первый настоящий отпуск за я уже не помню какое время.</p>

<p><center>* * * </center></p>

<p>Оставайтесь тунцов, земляне! Увидимся в следующем году.</p>]]></description>
            <pubDate>Sun, 31 Dec 2023 00:00:00 +0000</pubDate>
        </item>
        <item>
            <title>Чего там по винилу? Отчет за март 2024</title>
            <link>https://torunar.github.io/2024/03/26/vinyl-report/</link>
            <guid>https://torunar.github.io/2024/03/26/vinyl-report/</guid>
            <description><![CDATA[
<p><img src="https://torunar.github.io/2024/03/26/vinyl-report/img/cover.png" alt="" title=""></p>
<h2>Tiamat — Skeleton Skeletron</h2>

<p><img src="https://torunar.github.io/2024/03/26/vinyl-report/img/tiamat-skeleton-skeletron.jpg" alt="" title=""></p>

<p>Группа Tiamat полна парадоксов:</p>

<ul>
<li>По словам Юхана Эдлунда, вокалиста и фронтмена, в Tiamat только один участник — он сам, но тем не менее проект называется группой.</li>
<li>Эдлунд с 90-х живет в Германии и пишет всю музыку там, но группа Tiamat все равно считается шведской.</li>
<li>В дополнение к прошлому пункту: группа хоть и шведская, но их записи в Швеции найти <em>сложновато</em>, приходится заказывать из других стран.</li>
<li>Tiamat никогда не писали специально саундтреков для игр, но именно через игру Vampire the Masquerade: Bloodlines я о них узнал.</li>
<li>Группа всегда играла дэт-метал и готик-рок, но обложка Skeleton Skeletron выглядит так, будто внутри ждет забористое техно или евродэнс.</li>
</ul>

<p>Так и живем!</p>

<p>Издание на красном виниле выглядит стильно, весит солидно, но звучит шакально: даже при регулярной чистке вечно что-то подщелкивает и подскрипывает, надо его с мылом помыть будет что ли.</p>

<h2>Katatonia — Dead End Kings</h2>

<p><img src="https://torunar.github.io/2024/03/26/vinyl-report/img/katatonia-dead-end-kings.jpg" alt="" title=""></p>

<p>Лично для меня этот альбом закрепил окончательный переход группы к более прогрессивному и артовому звучанию.</p>

<p>Он отлично подойдет, чтобы вкатиться в их творчество: очень мелодичный, легкий для прослушивания, ему можно душевно подпевать на концертах, а если слушать его дома на большой громкости — соседи жаловаться не будут.
В прошлом году на концерте в Дании я видел мужичков за 40 в офисном прикиде, распивающих под треки с Dead End Kings белое вино из фужеров, — и это идеально передает вайб всего альбома.</p>

<p><em>Если верить Википедии, альбомов в дискографии Katatonia мне должно хватить суммарно на год.</em>
<em>Буду надеяться, что к тому времени они выпустят что-то новое, потому что шутка слишком хороша, чтобы бросать ее на полпути.</em></p>

<h2>Morhpine — Cure for Pain</h2>

<p><img src="https://torunar.github.io/2024/03/26/vinyl-report/img/morphine-cure-for-pain.jpg" alt="" title=""></p>

<p>Если до конца света остается всего 38 минут (мы все ближе к этому сценарию), а вы до сих пор не слышали ни одного трека Morphine — начинайте с этого альбома, потому что плохих или скучных треков тут нет.
Если же до конца остается всего три с половиной минуты — врубайте сразу Buena, лучше уже не будет.</p>

<p>Хоть Cure for Pain и не поднимался особо высоко в чартах, композиции с него разошлись на саундтреки к «Дарье», «Бивису и Баттхеду», «Клану Сопрано» и нескольким фильмам, а саксофонный проигрыш Дэны Колли из Head with Wings <del>подрезал</del> сэмплировал «Дельфин» в своем «Дилере»:</p>

<iframe src="https://www.youtube-nocookie.com/embed/QvjvqHTHLMg?si=FPZpYSj1Bxy-a5dI&amp;controls=0"></iframe>

<p><em>P.S.: Ставь лайк, если оставлял на басу всего две струны, чтобы играть Thursday слайдом как Марк Сэндман.</em></p>]]></description>
            <pubDate>Tue, 26 Mar 2024 00:00:00 +0000</pubDate>
        </item>
        <item>
            <title>Чего там по винилу? Отчет за апрель 2024</title>
            <link>https://torunar.github.io/2024/04/29/vinyl-report/</link>
            <guid>https://torunar.github.io/2024/04/29/vinyl-report/</guid>
            <description><![CDATA[
<p><img src="https://torunar.github.io/2024/04/29/vinyl-report/img/cover.png" alt="" title=""></p>
<h2>Tiamat — Judas Christ</h2>

<p><img src="https://torunar.github.io/2024/04/29/vinyl-report/img/tiamat-judas-christ.jpg" alt="" title=""></p>

<p>В <a href="https://torunar.github.io/2024/03/26/vinyl-report/">прошлый раз</a> я уже рассказывал, что зарекся брать Tiamat на красном виниле из-за его пыльности и в целом так себе качества печати.
И что же вы думаете? 
Я сделал это снова: не доглядел и заказал случайно какое-то там лимитированное издание на красном тяжелом виниле.</p>

<p>Возможно, дело в том, что <a href="https://imusic.se">iMusic</a>, на котором я теперь беру большую часть записей, не всегда пишут, какое именно издание ты покупаешь, и могут иногда положить mega deluxe limited expanded early adopter yoba edition вместо обычного (к сожалению, бывает и наоборот).
А возможно, я просто читаю жопой.</p>

<p>Со звуком на этой пластинке все уже окей, пыли в пакет тоже никто не насыпал. 
Подсудимый оправдан, получается, стоит сменить гнев на милость и взять последний альбом, который я хотел, тоже на красном виниле.</p>

<h2>Katatonia — Discouraged Ones</h2>

<p><img src="https://torunar.github.io/2024/04/29/vinyl-report/img/katatonia-discouraged-ones.jpg" alt="" title=""></p>

<p>Как я упоминал <a href="https://torunar.github.io/2024/02/29/vinyl-report/">ранее</a>, предыдущий по хронологии альбом Katatonia — Brave Murder Day, — вышел не без проблем.
Вокалист Йонас Ренксе из-за болезни уже не мог орать дурниной, вокал для альбома делал Микаэль Окерфельдт из Opeth, но это не помешало группе продолжить свое существование.</p>

<p>Discouraged Ones — это первый альбом переходного периода, и на нем все не так: стиль поменялся, музыканты новые, какой делать звук — вообще не понятно, вокалист не освоился с непривычной манерой пения, и все это звучит очень грустно, суматошно и безысходно.
Это сочетание делает альбом просто идеальным для/от мужской депрессии.
Даже само название, «Приунывшие», — отражает состояние, когда все из рук валится, проблемы громоздятся одна на другую, ты понятия не имеешь, что делать дальше и имеет ли вообще смысл делать хоть что-то.</p>

<p>Если вас спрашивают: «Как дела?», а ты отвечаешь: «Вроде нормально все», а потом <a href="https://www.youtube.com/watch?v=siAlDSZrtS0">чё-то раз и приуныл</a>, послушайте Discouraged Ones.
Возможно, станет легче.</p>

<p>Или нет.</p>

<h2>The Prodigy — The Fat of the Land</h2>

<p><img src="https://torunar.github.io/2024/04/29/vinyl-report/img/the-prodigy-the-fat-of-the-land.jpg" alt="" title=""></p>

<p>За очень многие вещи я берусь только потому, что в них есть великий мемный потенциал, и до сих пор это работает великолепно почти со всем: от литературы до видеоигр, от еды до одежды.</p>

<p>Фильмы Дэвида Линча, книги Владимира Сорокина, норвежский блэк-метал, игры серии Yakuza — вокруг всего этого выстроена огромной силы мемная культура.
Я заинтересовался ими из-за мемов, но в итоге начал их любить и ценить. 
Как говорится, I came looking for copper and found gold.</p>

<p>The Prodigy — еще один пример того, как великий мемный потенциал влияет на принимаемые решения: про эту группу и конкретно Кита Флинта я узнал раньше, чем слово «мем» вообще вошло в обиход.
Клипы этой группы мы в школьные годы передавали друг другу на <strong>дисках с приколами</strong>, а 10-секундные зашакаленные рингтоны с Firestarter и Smack My Bitch Up пересылали по <s>ИК-порту</s> Bluetooth с телефона на телефон.</p>

<p>А потом в один день я увидел обложку The Fat of the Land и прифигел: что может быть круче кислотно-оранжевого краба, шпарящего на всех парах?
Только толпа таких же крабов на обложке Expanded Edition:</p>

<p><img src="https://torunar.github.io/2024/04/29/vinyl-report/img/the-prodigy-the-fat-of-the-land-expanded.jpg" alt="" title=""></p>

<p>Лучше уже не будет, можно выключать. 
К сожалению, расширенное издание выходило только на CD, приходится довольствоваться малым, так что пластинка с главными хитами отправляется в коллекцию.</p>]]></description>
            <pubDate>Mon, 29 Apr 2024 00:00:00 +0000</pubDate>
        </item>
        <item>
            <title>Чего там по винилу? Отчет за февраль 2024</title>
            <link>https://torunar.github.io/2024/02/29/vinyl-report/</link>
            <guid>https://torunar.github.io/2024/02/29/vinyl-report/</guid>
            <description><![CDATA[
<p><img src="https://torunar.github.io/2024/02/29/vinyl-report/img/cover.png" alt="" title=""></p>
<h2>Молчат дома — С крыш наших домов</h2>

<p><img src="https://torunar.github.io/2024/02/29/vinyl-report/img/molchat-doma-s-krysh-nashyh-domov.jpg" alt="" title=""></p>

<p>«Молчат дома» были если не последней, то уж точно не первой группой, которую я ожидал найти в продаже в местных магазинах с пластинками.</p>

<p>Из плюсов: в комплекте с пластинкой оказался купон на скачку его же во FLAC.
Из минусов: пластинка то ли отпечатана очень дешево, то ли производили ее в самом пыльном помещении на свете, потому только после нескольких прослушиваний с регулярной очисткой щеткой она перестала скипать и заедать.
Первую купленную пластинку я даже вернул в магазин, думая, что это брак, но точно такие же проблемы всплыли и у копии, которую я взял на замену.</p>

<h2>Katatonia — Brave Murder Day</h2>

<p><img src="https://torunar.github.io/2024/02/29/vinyl-report/img/katatonia-brave-murder-day.jpg" alt="" title=""></p>

<p>Когда-нибудь настанет день, когда из этой рубрики пропадут пластинки Katatonia...
Но этот день не сегодня!</p>

<p>«Опять птицы эти дохлые, что у Katatonia за фиксация на них», — ворчит Машуля, а я заряжаю в проигрыватель альбом, названный по первым трем трекам с него: Brave, Murder и Day.</p>

<p>Фан-факт: это единственный полноформатник Katatonia, где на вокале выступает Микаэль Окерфельдт из легендарной группы Opeth, потому что у Йонаса Ренксе были проблемы со связками и орать в микрофон как дикая свинья он не мог.
Вообще у Opeth, Katatonia, October Tide и Bloodbath давнее и плотное сотрудничество, музыканты из этих групп умудрились переиграть и переездить в туры с другими коллективами.
Такая вот шведская музыкальная коммуналка.</p>

<h2>Morphine — Good</h2>

<p><img src="https://torunar.github.io/2024/02/29/vinyl-report/img/morphine-good.jpg" alt="" title=""></p>

<p>С группой Morphine я знаком примерно с того момента, как впервые взял в руки бас, то есть уже около 15 лет.
Поэтому неудивительно, что я планирую рано или поздно собрать все их записи.</p>

<p>Марк Сэндман долгое время был главным музыкантом, на которого я равнялся, именно его опыт вдохновлял меня на самые дикие эксперименты с инструментом, техниками игры и записи.
Очевидно, я не достиг и малой части того, что он успел сделать за свою короткую жизнь, но это и не важно, главное, что мне было весело.
Я верю, что Morphine — это музыка, доступная всем и способная привлечь любого, поэтому рекомендую вам это замечательное видео от Александра Тобольского с канала «Лонгплей»:</p>

<iframe src="https://www.youtube-nocookie.com/embed/CN6Rwvp7q7U?si=T8_sC46rNqfNKml0"></iframe>]]></description>
            <pubDate>Thu, 29 Feb 2024 00:00:00 +0000</pubDate>
        </item>
        <item>
            <title>Чего там по винилу? Отчет за май 2024</title>
            <link>https://torunar.github.io/2024/05/29/vinyl-report/</link>
            <guid>https://torunar.github.io/2024/05/29/vinyl-report/</guid>
            <description><![CDATA[
<p><img src="https://torunar.github.io/2024/05/29/vinyl-report/img/cover.png" alt="" title=""></p>
<h2>Jaga Jazzist — Pyramid</h2>

<p><img src="https://torunar.github.io/2024/05/29/vinyl-report/img/jaga-jazzist-pyramid.jpg" alt="" title=""></p>

<p>Рано или поздно в жизни человека наступает момент, когда его начинает тянуть к великому и вечному, например, к пирамидам.
Но поскольку отправиться к египетским пирамидам сейчас нет ни желания, ни возможности, приходится обходиться музыкальными аналогами — одним из них стал одноименный релиз норвежского октета Jaga Jazzist.</p>

<p>На пластинке всего четыре трека, но по продолжительности набирается почти 40 минут экспериментального джаза. 
Запись идеально подходит и для фона в потоке во время работы, и для увлеченного разглядывания узоров на ковре при прослушивании дома в кресле.</p>

<p>В комплекте с пластинкой лежит самый необычный артефакт, что я когда либо встречал, — кусок фольгированного картона, из которого предлагается сложить уже означенную пирамиду.
Так каждый желающий может не только услышать, но и прикоснуться к великому.</p>

<h2>Katatonia — Tonight's Decision</h2>

<p><img src="https://torunar.github.io/2024/05/29/vinyl-report/img/katatonia-tonights-decision.jpg" alt="" title=""></p>

<p>Второй после Discouraged Ones альбом Katatonia из переходного периода.
В музыке начинает появляться то самое тревожное мироощущение, которое потом закрепится на Last Fair Deal Gone Down и <a href="https://torunar.github.io/2024/01/29/vinyl-report/">Viva Emptiness</a> и придет к своему пику на монументальном <a href="https://torunar.github.io/2023/12/28/vinyl-report/">The Great Cold Distance</a>.</p>

<p>Хотя на этом альбоме нет сильных хитов, совсем не интересным его назвать тоже нельзя.
Особенно можно выделить кавер-версию Nightmares by the Sea, в оригинале исполненную Джеффом Бакли.
Если зайти в комментарии к этому треку на Ютубе, то вы встретите там чересчур фанатичных поклонников Бакли, заявляющих, что оригинал лучше во всем, а такие каверы только порочат его светлую память:</p>

<p><img src="https://torunar.github.io/2024/05/29/vinyl-report/img/angry-comments.png" alt="" title=""></p>

<p>Но как говорится, если блядей корёжит, вы все делаете правильно.</p>

<p>Трек A Darkness Coming — вывернутая наизнанку история про мальчика, который кричал «Волки!», приправленная лавкрафтовским неописуемым ужасом.
Вас предупреждали, что тьма придет и принесет с собой непонятно какие ужасы, но вы не слушали, и вот она уже здесь — но никто все еще понятия не имеет, чем это грозит.</p>

<p>Тревожно? Не особо. <br>
Круто? Очень.</p>

<h2>Maserati — Pyramid of the Sun</h2>

<p><img src="https://torunar.github.io/2024/05/29/vinyl-report/img/maserati-pyramid-of-the-sun.jpg" alt="" title=""></p>

<p>Рано или поздно в жизни человека наступает момент, когда после прослушивания тревожной музыки его снова тянет к великому и вечному, например, к пирамидам.
И когда Jaga Jazzist уже прослушан, в дело вступают Maserati из Афин в <del>Грузии</del> Джорджии, США.</p>

<p>На сегодняшний день это самое дорогое-богатое издание из всего, что я брал: юбилейный тираж, фиолетовый и пурпурный винилы, конверты с полиграфией, обложка из плотного картона, артбук с психоделическими фото и абстрактными картинками, чтобы залипать в них за прослушиванием инструментального космического рока.
Выглядит офигенно, звучит классно, одна беда — в полку для пластинок по высоте не входит, пришлось поставить ее отдельно.</p>

<p>Надеюсь, этими двумя альбомами получится закрыть странную тягу к пирамидам на ближайшее время и брать еще и Pyramid Of The Necropolis группы War Master не придется.</p>]]></description>
            <pubDate>Wed, 29 May 2024 00:00:00 +0000</pubDate>
        </item>
        <item>
            <title>Чего там по винилу? Отчет за январь 2024</title>
            <link>https://torunar.github.io/2024/01/29/vinyl-report/</link>
            <guid>https://torunar.github.io/2024/01/29/vinyl-report/</guid>
            <description><![CDATA[
<p><img src="https://torunar.github.io/2024/01/29/vinyl-report/img/cover.png" alt="" title=""></p>
<h2>Cliff Martinez — Drive</h2>

<p><img src="https://torunar.github.io/2024/01/29/vinyl-report/img/drive.jpg" alt="" title=""></p>

<p>Поиски ответа на вопрос, умер ли персонаж Райна Гослинга в конце «Драйва», привели меня к покупке этого саундтрека.
Отчасти на решение повлияло и то, что это издание на флюоресцентном виниле; в детстве я был без ума от игрушечных динозавров, которых нужно было «заряжать» на солнце ради одной-двух минут света в темном шкафу.</p>

<p>Увы, даже в светящемся состоянии саундтрек не проливает света на загадочную концовку фильма.</p>

<h2>Katatonia — Viva Emptiness</h2>

<p><img src="https://torunar.github.io/2024/01/29/vinyl-report/img/katatonia-viva-emptiness.jpg" alt="" title=""></p>

<p>Оригинальный Viva Emptiness я покупал на CD еще в 2007-ом, на виниле же я взял расширенное издание, приуроченное к десятилетию альбома. Несмотря на то, что в переиздании некоторые треки звучат лучше из-за ремастеринга и добавленных клавишных партий, в целом альбом лишился одной фишки. В оригинальном издании, на мой взгляд, был восхитительный трюк с двойной концовкой: сначала Omerta обрывалась буквально на полуслове, создавая ощущение клиффхэнгера:</p>

<iframe src="https://www.youtube-nocookie.com/embed/3mej0gh4SBo?si=GNgSt8FKTUEqfCA3"></iframe>

<p>Следом за ней шла инструментальная Inside the City of Glass. Она создавала потустороннее ощущение, которое отлично резонировало с названием трека и давало альбому второй финал:</p>

<iframe src="https://www.youtube-nocookie.com/embed/7oz9Wvl87MM?si=DykwIs7NQGSv-VxW"></iframe>

<p>В переиздании в Inside the City of Glass был добавлен вокал, что не сильно повлияло на трек само по себе, но вот добавленный перед ним Wait Outside немного размывает ощущение второго финала.  В целом переиздание вышло хорошим, но если появится возможность, я заменю его на оригинал.</p>

<h2>Black Sabbath — Paranoid</h2>

<p><img src="https://torunar.github.io/2024/01/29/vinyl-report/img/black-sabbath-paranoid.jpg" alt="" title=""></p>

<p>Моя любимая работа группы Black Sabbath — это композиция Black Sabbath с альбома Black Sabbath, поэтому вполне очевидно, что я хотел брать ее.</p>

<p>Маша сказала, что ни одного трека с этого альбома не знает и брать нужно что-то, что можно слушать, например Paranoid.</p>

<p>Мы все обсудили, пришли к консенсусу и взяли Paranoid, поскольку я хоть и не люблю его всем сердцем, но все же признаю его большой мемный потенциал:</p>

<iframe src="https://www.youtube-nocookie.com/embed/kyGL8lGJ4cE?si=krnLRdwDbtm49_Rb"></iframe>]]></description>
            <pubDate>Mon, 29 Jan 2024 00:00:00 +0000</pubDate>
        </item>
        <item>
            <title>Как Иван-дурак шведский учил</title>
            <link>https://torunar.github.io/2024/02/11/sfi/</link>
            <guid>https://torunar.github.io/2024/02/11/sfi/</guid>
            <description><![CDATA[
<p>Несмотря на то что мне с моей работой программистом <s>за 300к/наносек.</s> можно весьма комфортно жить в стране и без знания языка, год назад я все же взялся за его изучение.
В этом посте я расскажу о том, как в Швеции вообще работает изучение языка на государственном уровне, с чем придется столкнуться и причем тут этот мем из «Интерстеллара»:</p>

<p><img src="https://torunar.github.io/2024/02/11/sfi/img/51-years.jpg" alt="" title=""></p>
<h2>Слово из трех букв</h2>

<p>Итак, ты решил выучить шведский. 
Отличные новости: Швеция крайне поощряет подобную инициативу, потому что правительство считает овладение языком одним из важнейших факторов интеграции в общество.
Поэтому в стране действует программа обучения языку с названием-аббревиатурой, которое работает сразу на двух языках: Sfi — это и svenska för invandrare, и Swedish for immigrants.
В рамках этой программы можно изучать язык совершенно бесплатно и без СМС (но с регистрацией) на базе школ дополнительного образования и университетов.</p>

<p>Занятия бывают разной интенсивности: можно заниматься по три часа как два раза в неделю вечером, так и каждый день днем.
Также есть вариант интенсивного изучения языка, когда в школе ты проводишь восемь часов каждый будний день, помимо языка активно изучаешь культуру шведского общества и осваиваешь какие-то трудовые навыки. 
Таким образом людей, недополучивших образование или подвергающихся угнетению по культурными и религиозным причинам, более активно интегрируют в социум.</p>

<p>Некоторые школы также предлагают дистанционное образование, где формат и расписание целиком отдаются на откуп преподавателю, с ним я дела не имел, поэтому ничего рассказать не могу.</p>

<h2>Учим алфавит</h2>

<p>Когда вы записываетесь на курсы, с вами проводят небольшое собеседование, в рамках которого спрашивают про образование (как школьное, так и высшее), какими языками владеете, где и кем работали.
Школам это нужно для того, чтобы понять, с какого уровня обучения вы начнете — и вот тут нужно лирическое отступление.</p>

<p>Sfi для обозначения уровней владения языком не использует устоявшуюся международную градацию от A1 до C2.
В зависимости от образования и умения учиться можно попасть на один из следующих уровней:</p>

<ul>
<li>A — сюда попадает тот, кто в своей стране не получил даже полного школьного образования, не умеет писать или читать или знает только один язык;</li>
<li>B — для тех, кто не имеет высшего образования или имеет его, но все равно владеет только родным языком. Впрочем, даже если высшего образования нет, кураторы все равно могут определить на следующий уровень, если видят в вас потенциал;</li>
</ul>

<p>Обучение на уровнях A и B как правило ведется на родном языке студентов с активным использованием картинок и глубокой проработкой базовых вещей типа письменности.
Из-за этого оно может занимать достаточно много времени, до года, но зачастую уже после окончания этих уровней люди могут что-то говорить по-шведски и готовы если не работать, то продолжать обучение.</p>

<ul>
<li>C — большинство людей с образованием и знанием языков начинают на этом уровне;</li>
<li>D — сюда можно попасть, уже имея подтвержденные знания с уровня C;</li>
</ul>

<p>Окончание четырех этих уровней означает, что вы владеете языком на уровне выпускника начальной школы (пять классов обучения).
Грубо говоря, уровень C соответствует A2/B1, а D — B1/B2.
Уровни C и D занимают обычно от шести до девяти месяцев каждый.</p>

<p>После окончания «буквенных» курсов идет grundläggande nivå — владение языком на уровне стандартной школьной программы (десять классов), а после идет gymnasienivå — уровень старшей школы.
Если вы закончили gymnasienivå, то можете свободно поступать в университет и обучаться целиком на шведском.</p>

<h2>Учат в школе</h2>

<p>На курсах вы будете заниматься стандартными активностями: читать, писать, задрачивать грамматику, практиковаться в говорении и слушании.
Несмотря на государственную природу Sfi, никакого плана, утвержденного Министерством образования, нет: каждый преподаватель волен выбирать учебные материалы, способы преподавания, порядок изучения тем и методики проверки ваших знаний.</p>

<p>С одной стороны, это дает возможность по-настоящему хорошим учителям использовать самые релевантные материалы и распределять нагрузку в группе так, чтобы каждый был максимально вовлечен.
С другой — это порождает ситуацию, когда в школах годами работают учителя, абсолютно никак не заинтересованные в своей работе и откровенно враждебные к ученикам.
Представьте, как вы из раза в раз приезжаете в школу после восьмичасового рабочего дня, а преподаватель просто выдает вам ноутбук и говорит, мол, иди занимайся в Lunis (это такая местная система для самообразования с упражнениями и тестиками), а потом сам себя же и проверь.</p>

<p>Все очень сильно завязано на личность и компетенции преподавателя.
Не повезло с преподом — можно либо терпеть, либо написать жалобу ректору и попросить о переводе в другой класс, либо ливнуть с курсов.
Многие студенты  выбирают последний вариант, из-за чего изрядно похудевшие учебные группы постоянно сливают и доукомплектовывают новыми учениками.
Попасть с нуля в группу, которая училась уже несколько месяцев, — реальность, за все время учебы мимо меня прошло десятка два таких «духов»: они попадают в группу с заведомо слишком высоким уровнем, выгорают за считанные недели, и больше я их никогда не вижу.
А ведь как все хорошо начиналось!</p>

<h2>LEVEL UP</h2>

<p>Предполагается, что каждый преподаватель будет в ходе обучения контролировать прогресс учеников.
Кто-то для этого проводит диагностические тесты, кто-то полагается на собственные ощущения.
Так или иначе, когда ваш учитель решит, что вы готовы, вас отправят писать стандартизированный государственный экзамен, который проходит каждые два месяца.</p>

<p>Провал этого экзамена ведет к отчислению с курсов, запрету записываться на них в течение одного года и, вероятно, каким-то кармическим компенсациям для преподавателей, поэтому последние предпочитают играть максимально безопасно: если у них есть хоть малейшее сомнение в том, что вы не справитесь с экзаменом, то вас до него не допустят.</p>

<p>В прошлом это порождало ситуацию, где люди вписывались на Sfi, пинали хуи в течение нескольких лет, все это время получали от соцслужб выплаты по безработице и пособие на детей и вполне беззаботно жили, но с 2023-го года максимальное время пребывания на каждом уровне Sfi сократили до одного года, по окончанию которого учитель без вариантов отправит вас на экзамен.
Возможно, это повысит процент учеников, которые приходят в школу действительно для учебы, поживем — увидим.</p>

<h2>Покажите на этой кукле, где вас трогали</h2>

<p>Мое путешествие в Sfi началось в ноябре 2022-го, когда я пошел проходить собеседование и вставать в очередь.
Меня поспрашивали про работу и учебу, удивились тому, что я учил японский просто из интереса, и определили на уровень C.</p>

<p>Уже в январе 2023-го пришло бумажное письмо о том, что мои занятия начинаются 13-го февраля.</p>

<p>С первым преподавателем, Марией, мне повезло: во-первых, она была преподавателем по образованию (да, педагогическое образование не является условием для работы в Sfi), а во-вторых, была специалистом по шведскому языку.
Она с самого начала взяла курс на преподавание на шведском, переключаясь на английский тогда, когда иного способа объяснить ситуацию не было, очень детально описывала, как работает грамматика, и активно подталкивала людей читать и пересказывать книги.</p>

<p>К маю 2023-го наша группа с 25 человек сократилась до 10, а мне сказали, что я готов идти писать экзамен.
Несмотря на то что к тому времени я уже что-то там понимал на слух, мог кудахтать сам, писал небольшие тексты без словаря и читал упрощенные новости, я с этих новостей прифигел и идти на экзамен отказался, потому что три месяца — и уже экзамен?
Впоследствии я неоднократно пожалел об этом решении, потому что этот маневр пускай и не стоил мне 51 года, но дальше дела резко пошли под откос.</p>

<p>С середины мая нам поставили второго преподавателя: Мария по-прежнему вела занятия в понедельник, а занятия по средам взяла на себя Маргарета, которая на первом же занятии сказала нам, что ей в принципе плевать, будем ли мы чему-то учиться или нет, потому что ей за нас уже заплатили. 
Поэтому вместо учебы мы зачастую смотрели какие-нибудь обучающие видосы на Ютубе или слушали прохладные истории про ее детей или внуков.
Шведского на этих занятиях я слышал меньше, чем в своей конторе, где большая часть окружения — не шведы.</p>

<p>Я все это терпел два месяца до летних каникул и морально готовился после их окончания написать наконец экзамен и уйти на следующий уровень подальше от Маргареты. 
С каникул мы вышли, проучились весь август, а потом пришли охуительные новости: наша группа стала слишком мала, поэтому нас сливают с другой группой и перекидывают к другой паре преподавателей — Владимиру и Андреасу (один географ, другой историк).
Новые преподы четко обозначили свою позицию: они нас всех видят в первый раз, наших уровней они не знают, поэтому на следующий экзамен через месяц никто не идет.
Учимся!</p>

<p>Прошел месяц, я привык к новым преподавателям, мы написали диагностический тест и были уже, казалось бы, готовы идти на экзамен, но нашу группу распилили на три куска и приклеили эти куски к другим существующим группам. 
Так в октябре 2023-го я попал к моему <strong>пятому</strong> преподавателю.</p>

<p>В этот момент мне просто космически бомбануло, я написал огромное проникновенное письмо ректору, в котором высказал все что думаю про их подход к формированию и управлению группами и выразил надежду, что в будущем они исправят эту ситуацию. 
Ректор даже мне ответил: «Да, что-то жопа какая-то. Я так-то <strong>увольняюсь через две недели</strong>, но донесу эту инфу до остальных руководителей и преподавателей».
И, судя по всему, даже донес, потому что первую лекцию наша новая преподавательница Анне-Ли начала со слов: «До меня дошла информация, что я ваш пятый учитель за восемь месяцев. Я постараюсь также стать и вашим последним учителем на курсе C!».</p>

<p>С Анне-Ли обучаться было в целом комфортно и весело, несмотря на ее горячее желание обучать нас сконскому (сконский и стокгольмский диалекты различаются примерно так же, как кубанский и центрально-европейский русский) и утверждать, что это — единственный правильный путь.
Я просидел в школе еще четыре месяца и наконец был допущен до экзамена в конце января.
К экзамену я оказался подготовлен даже чересчур хорошо: в чтении и аудировании я не допустил ни одной ошибки, а письменная часть экзамена, по мнению проверявших его преподавателей, была выполнена на уровне D.</p>

<p>Уже завтра, 12-го февраля, я выхожу на первое занятие на курсе D. 
Надеюсь, что там я не попаду в другой мем из «Интерстеллара»:</p>

<p><img src="https://torunar.github.io/2024/02/11/sfi/img/7-years.jpg" alt="" title=""></p>

<p>Vi ses!  </p>]]></description>
            <pubDate>Sun, 11 Feb 2024 00:00:00 +0000</pubDate>
        </item>
        <item>
            <title>Реверс-инжиниринг загрузок с Bandcamp во имя любви и мира</title>
            <link>https://torunar.github.io/2024/06/24/bandcamp-downloads/</link>
            <guid>https://torunar.github.io/2024/06/24/bandcamp-downloads/</guid>
            <description><![CDATA[
<p><img src="https://torunar.github.io/2024/06/24/bandcamp-downloads/../bandcamp-downloads-en/img/cover.png" alt="Combination of cUrl and Bandcamp logos" title=""></p>
<p><em><strong>Ахтунг</strong>: Этот пост вышел куда длиннее и запутаннее, чем я изначально планировал.</em>
<em>Поскольку это все-таки мой блог, то я решил оставить все, как есть, но если вам интересны только технические детали, то <a href="#technical">до них буквально один клик</a>.</em></p>

<p>Ух, как же я люблю Bandcamp.
Ни одна музыкальная платформа не дарит мне такой радости от поиска, прослушивания и покупки музыки.
На первый взгляд, у Bandcamp нет никакого Алгоритма™, как у Spotify, Apple Music или YouTube.
Хочешь — подписывайся на отдельные жанры, и тебе в ленту будет приносить новые и не очень релизы: будет и годнота, и мусор.
На отдельных музыкантов тоже можно подписываться, но я не заметил, чтобы они хоть как-то влияли на выдачу в ленте.
В современном мире за такое принято закидывать говной, но мне такой подход прям заходит: вроде бы и вся музыка на кончиках пальцев, но чтобы найти что-то топовое, все равно нужно перерыть и переслушать кучу всего.</p>

<p>Bandcamp меня буквально в середину 00-х переносит.
Был у нас в городе один магазинчик для неформалов, который торговал всяким (преимущественно поддельным) мерчем и <a href="https://knowyourmeme.com/memes/three-wolf-moon">футболками с волками</a>.
Я там мог часам зависать, залипая в витрины на футболки, которые все равно не мог себе позволить, и диски с кассетами, многие из которых пылились в продаже годами.
К счастью, продавцы относились ко всяким лодырям нейтрально — наверное, понимали, что рано или поздно лодырь накопит денег с обедов и что-нибудь да купит.</p>

<p>Покупка музыки там каждый раз была лотереей: нормального интернета в ту пору у меня еще не было, совета спросить было не у кого, вот и приходилось ограничиваться инфой из Википедии да отрывочными сведениями от одноклассников.
Так что стратегия была каждый раз одна и та же: пялишься на обложки, пока глаза не пересохнут, спрашиваешь чего-нибудь у скучающей томной девицы за прилавком и выбираешь в итоге почти пальцем в небо.
Иной раз притащишь домой диск Lacrimosa и влюбишься в них на всю жизнь, а порой возьмешь Children of Bodom на кассете да так больше одного раза ее и не послушаешь.
Не стоит недооценивать силу азарта!</p>

<p>Spotify со своими рекомендациями после такого выглядит жалко и пресно: "Ой, вам понравился сахар, возможно, вам понравится стевия", а Apple вообще могут жопу пососать — я ненавижу эту компанию и все, что они делают, слишком сильно, чтобы даже задумываться о покупке чего-либо от них когда-либо.
К подписочным сервисам я отношусь с недоверием и недовольством (и это в 2к24-м-то!): как по мне, если я уже заплатил за музыку, у меня должна быть возможность ее себе на компухтер сохранить, в Winamp'е послушать, а потом закинуть на внешний аудиоплеер (с кнопочками!), воткнуть наушники в него и пойти куда-нибудь по делам:</p>

<p><img src="https://torunar.github.io/2024/06/24/bandcamp-downloads/../bandcamp-downloads-en/img/player.jpg" alt="Player" title=""></p>

<p>И не в одной музыке дело: Sony жоско меня предали, забанив мой шведский PSN-аккаунт, а с русского аккаунта сейчас, понятное дело, игры не купить;
вероятность когда-то потерять доступ ко всем играм, которыми я (не) владею в Steam, тоже особой уверенности в завтрашнем дне не приносит.
Поэтому нынче, если я что и покупаю, то делаю это на GOG.com: они дают скачать отдельный установщик, так что без третьих Героев я не останусь даже в случае краха цивилизации (и да, я реально бэкаплю локально инсталлеры из GOG).</p>

<p>С учетом моей любви к Bandcamp, ничего удивительного, что я частенько пилю какие-то хаки и костыли вокруг него.
Увы, Bandcamp никаких публичных API для большей части функциональности не дают, но даже так я смог запилить ряд тулзов, которыми пользуюсь регулярно:</p>

<p><strong><a href="https://github.com/torunar/bc-player">BC Player</a></strong>:
альтернативный плеер, который умеет очереди (и <a href="https://github.com/torunar/bc-player-helper">расширение для браузера</a> для прямой интеграции с лентой).</p>

<p><strong><a href="https://github.com/torunar/bandcamp-liked-albums-widget">Виджет с лайками</a></strong>:
как таковых, лайков на Bandcamp нет, есть только вишлист, но они сами решили использовать иконку с сердечком для него — close enough, как говорится.
Список лайков можно вытащить через (незадокументированное, конечно же) API для поиска, поэтому я смог запилить одностраничник, где можно хвастаться своим ужасным музыкальным вкусом.
Я вот хвастаюсь, например:</p>

<iframe src="https://torunar.github.io/bandcamp-liked-albums-widget/?fan_id=3382834" style="min-height: 270px; margin-bottom: var(--uiGap);"></iframe>

<p><strong><a href="https://github.com/torunar/rss-feeds">RSS с лайками</a></strong>:
по сути, то же самое, но в форме RSS-ленты.
Я в основном слушаю блэкгейз, матрок, синтвейв и брейккор, так что если есть желание узнавать, чего мне там понравилось, раньше, чем я напишу об этом в своем <a href="https://t.me/misha_talks">Телеграм-канале</a>, то вот ссылка на ленту: <a href="https://torunar.github.io/rss-feeds/build/bandcamp-liked-albums.xml">https://torunar.github.io/rss-feeds/build/bandcamp-liked-albums.xml</a>.</p>

<p>Я уже упоминал, что на Bandcamp можно покупать музыку, но огромное ее количество доступно бесплатно.
Легально.
Без регистрации, без СМС.
Даже формат для скачивания можно выбрать, ну не лапочки ли?</p>

<p><img src="https://torunar.github.io/2024/06/24/bandcamp-downloads/../bandcamp-downloads-en/img/format-selector.png" alt="Bandcamp download format selector" title=""></p>

<p>И даже если у чего-то нет бесплатной версии, всегда есть <a href="https://github.com/ytdl-org/youtube-dl">youtube-dl</a>.
Bandcamp понимают, что у кого есть желание пиратить, спиратит обязательно, и поэтому они не чинят то, что не сломано: <a href="https://bandcamp.com/help/audio_basics#steal">"I heard you can steal music on Bandcamp. What are you doing about this?"</a>.
Тут все остается на усмотрение пользователя: хочешь поддержать исполнителя — давай, сколько дашь, музыканты с твоей покупки получат большую часть денег, а ты получишь свой релиз, чтобы слушать его на внешнем аудиоплеере (с кнопочками!).</p>

<p><span id="technical"></span>
И тут-то мы и добрались до сути: а как вообще устроено скачивание бесплатных (т.е. без минимальной цены) релизов на Bandcamp?
Что, если я хочу локальную копию <strong>всего</strong> своего списка лайков?
Не думают же они, что я буду каждый альбом отдельно качать?
Даже так, наверняка это можно как-то обойти.
Так что идем на страницу <a href="https://sugarwounds.bandcamp.com/album/mechanical-friends-remastered">какого-нибудь бесплатного альбома</a>, выбираем бесплатную загрузку и смотрим, куда нас редиректит:</p>

<pre><code>https://bandcamp.com/download?id=472457604&amp;ts=1719170366.294537336&amp;tsig=5e1411c3cc4ffe2b0c02b31ffb0e60de&amp;type=album
</code></pre>

<p>Так, в URL'е есть ID альбома, какие-то токен и подпись.
У разных альбомов разные ID, а токен и подпись вообще каждый раз меняются, их захардкодить нигде не получится.
Со времен работы над BC Player я знаю, что информация об альбоме хранится в элементе <code>script</code> с атрибутом <code>data-tralbum</code>, где в формате JSON куча всего про альбом, может и ссылка на скачивание там найдется?</p>

<pre><code>{
  "for the curious": "https://bandcamp.com/help/audio_basics#steal https://bandcamp.com/terms_of_use",
  "current": "/** skipped **/",
  "preorder_count": null,
  "hasAudio": true,
  "art_id": 3553041759,
  "packages": null,
  "defaultPrice": 7.0,
  "freeDownloadPage": "https://bandcamp.com/download?id=472457604&amp;ts=1719170366.294537336&amp;tsig=5e1411c3cc4ffe2b0c02b31ffb0e60de&amp;type=album",
  "FREE": 1,
  "PAID": 2,
  "artist": "Sugar Wounds",
  "item_type": "album",
  "id": 472457604,
  "last_subscription_item": null,
  "has_discounts": false,
  "is_bonus": null,
  "play_cap_data": null,
  "client_id_sig": null,
  "is_purchased": false,
  "items_purchased": {
    "packages": {},
    "bundles": {},
    "crowdfunding_campaign": {}
  },
  "is_private_stream": null,
  "is_band_member": null,
  "licensed_version_ids": null,
  "package_associated_license_id": null,
  "has_video": null,
  "tralbum_subscriber_only": false,
  "featured_track_id": 4234552772,
  "initial_track_num": null,
  "is_preorder": false,
  "album_is_preorder": false,
  "album_release_date": "24 May 2024 08:11:31 GMT",
  "trackinfo": "/** skipped **/",
  "playing_from": "album page",
  "url": "https://sugarwounds.bandcamp.com/album/mechanical-friends-remastered",
  "use_expando_lyrics": false
}
</code></pre>

<p>Ну да, вот она, в свойстве <code>freeDownloadPage</code>.
Итак, как попасть на страницу загрузки — понятно, но как забрать желанный ZIP архив с файликами?
Открываем исходный код страницы и начинаем копать.
Находим <code>script</code> с ID <code>pagedata</code>, у которого в <code>data-blob</code> очередная JSON-простыня.
Нам оттуда мало, что нужно, кроме вот этой части:</p>

<pre><code>{
  "digital_items": [
    {
      "downloads": {
        "mp3-320": {
          "size_mb": "63.3MB",
          "description": "MP3 320",
          "encoding_name": "mp3-320",
          "url": "https://popplers5.bandcamp.com/download/album?enc=mp3-320&amp;fsig=00b08a0ef60ff8f0a9b9e4970c0ba43b&amp;id=472457604&amp;ts=1719170609.0"
        }
      }
    }
  ]
}
</code></pre>

<p>Выглядит как список форматов из селектора с URL'ами для скачивания.
Но вот, что будет, если по этому URL перейти:</p>

<p><img src="https://torunar.github.io/2024/06/24/bandcamp-downloads/../bandcamp-downloads-en/img/download-expired.png" alt="Download expired" title=""></p>

<p>Блин.
Уже пора через сетевой монитор дебажить, что откуда качается?
Потыкав немного в страницу загрузки, я выяснил, что эти адреса — не для загрузки, а для предоставления информации <strong>о загрузке</strong>.
Например, выбрав формат MP3-320, я вижу, что сайт запрашивает информацию с немного другого адреса, нежели в pagedata:</p>

<pre><code>https://popplers5.bandcamp.com/statdownload/album?enc=mp3-320&amp;fsig=d0b8d24621d44e47db70e80af71eb6b7&amp;id=472457604&amp;ts=1719170610.3045844466&amp;.rand=1118817395515&amp;.vrs=1
</code></pre>

<ul>
<li><code>download</code> превратился в <code>statdownload</code>.</li>
<li><code>ts</code> заканчивается не на <code>.0</code>, а на какое-то рандомное число.</li>
<li>Добавился параметр <code>&amp;.rand</code> с, опять же, рандомным значением.</li>
<li><code>&amp;.vrs=1</code> в конце URL.</li>
</ul>

<p>В ответе же прилетает:</p>

<pre><code>{
  "result": "ok",
  "url": "popplers5.bandcamp.com/statdownload/album?enc=mp3-320&amp;fsig=d0b8d24621d44e47db70e80af71eb6b7&amp;id=472457604&amp;ts=1719170610.3045844466&amp;.rand=1118817395515&amp;.vrs=1",
  "host": "scruffycentral-b4gx-2",
  "download_url": "https://p4.bcbits.com/download/album/1be668409c340ce30382a4b172b1ba553/mp3-320/472457604?fsig=67b47364b6ff165b09c0df8d994c7384&amp;id=472457604&amp;ts=1719171791.1334808993&amp;token=1719776591_abb599a8c126fc1a86667adcab20b1649975e991"
}
</code></pre>

<p>И куда же ведет <code>download_url</code>?
На скачку желанного ZIP архива с бесплатной (легально, без регистрации, без СМС) музыкой:</p>

<p><img src="https://torunar.github.io/2024/06/24/bandcamp-downloads/../bandcamp-downloads-en/img/free-music.png" alt="lol-limeware" title=""></p>

<p>Проблема лишь в том, что я понятия не имею, как вычисляются "хвост" <code>ts</code> и параметр <code>.rand</code>.
Что, если туда закинуть реально рандомные значения?
В ответ приходит уже не JSON, а вполне себе Javascript:</p>

<pre><code>if (window.Downloads) {
    Downloads.statResult({
        "result": "err",
        "retry_url": "https://popplers5.bandcamp.com/download/album?enc=mp3-320&amp;fsig=68a6ccd613ace8850db6e42258de8625&amp;id=472457604&amp;ts=1719217640.3278671238",
        "errortype": "ExpiredFreeDownloadError",
        "date": "2024-06-24 08:27:20 UTC",
        "url": "popplers5.bandcamp.com/statdownload/album?enc=mp3-320&amp;fsig=23be1fba7f0f83c6f725ed9cbcae4275&amp;id=472457604&amp;ts=1719217626.0&amp;.rand=1719217626000&amp;.vrs=1",
        "host": "scruffycentral-b4gx-1"
    })
};
</code></pre>

<p>И <code>retry_url</code> (как удобно) как раз ведет на скачивание.</p>

<p>Bandcamp, пожалуйста, не меняйся.
Что дальше?
Пилить тулзу для бэкапа всего вишлиста?
Можно и так, весь описанный выше процесс помещается в один скрипт на bash (если вы понимаете <code>sed</code>):</p>

<pre><code>#!/usr/bin/env bash

ITEM_URL="${1}"

FREE_DL_PAGE_URL=$(curl -sq "${ITEM_URL}" \
    | sed -nE -e 's/^.+(https:\/\/bandcamp.com\/download\?id=[0-9]+&amp;amp;ts=[0-9]+.[0-9]+&amp;amp;tsig=[a-z0-9]+&amp;amp;type=album).+/\1/p' \
    | sed 's/&amp;amp;/\&amp;/g' \
)

DL_STAT_URL="$(curl -sq "${FREE_DL_PAGE_URL}" \
    | sed -nE -e 's/^.+(https:\/\/popplers5.bandcamp.com\/download\/album\?enc=mp3-320&amp;amp;fsig=[a-z0-9]+&amp;amp;id=[0-9]+&amp;amp;ts=[0-9]+.0).+/\1/p' \
    | sed 's/&amp;amp;/\&amp;/g' \
    | sed 's/\/download\//\/statdownload\//' \
)&amp;.rand=$(date +%s)000&amp;.vrs=1"

DL_URL=$(curl -sq "${DL_STAT_URL}" \
    | sed -nE -e 's/.+(https:\/\/popplers5.bandcamp.com\/download\/album\?enc=mp3-320&amp;fsig=[a-z0-9]+&amp;id=[0-9]+&amp;ts=[0-9]+.[0-9]+).+/\1/p'\
)
curl -o music.zip "${DL_URL}"
</code></pre>

<p>И если вы дочитали этот пост до конца, вы — настоящий герой.
Я непременно вернусь с очередной партией отвратительных хаков, а до той поры — оставайтесь тунцов!</p>]]></description>
            <pubDate>Mon, 24 Jun 2024 00:00:00 +0000</pubDate>
        </item>
    </channel>
</rss>
